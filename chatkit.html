<!DOCTYPE html>
<html>
<head>
  <title>Dsouza Demo Agent</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">

<div class="container py-5">
  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white">
      Dsouza Demo Agent
    </div>
    <div class="card-body" style="height:400px; overflow-y:auto" id="chat"></div>
    <div class="card-footer d-flex gap-2">
      <input id="msg" class="form-control" placeholder="Ask something..." />
      <button class="btn btn-primary" onclick="send()">Send</button>
    </div>
  </div>
</div>

<script>
async function send() {
  const input = document.getElementById("msg");
  const chat = document.getElementById("chat");
  const text = input.value.trim();
  if(!text) return;

  chat.innerHTML += `<div class="text-end mb-2"><span class="badge bg-secondary">${text}</span></div>`;
  input.value = "";

  const res = await fetch("https://zero4-rw20.onrender.com/chat?q=" + encodeURIComponent(text));
  const data = await res.json();

  chat.innerHTML += `<div class="text-start mb-2"><span class="badge bg-success">${data.reply}</span></div>`;
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
